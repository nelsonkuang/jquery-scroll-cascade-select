!function(a,b){a.SCS={version:"1.0.0"},SCS.defaults={navArr:[{title:"省",id:"scs_items_prov"},{title:"市",id:"scs_items_city"},{title:"区",id:"scs_items_dist"}],skinCss:"",onOk:function(a,b){},onCancel:function(){}},SCS.init=function(a){var a=b.extend({},SCS.defaults,a),c="",d=a.navArr;c+='<div class="cascade_scroll_selects '+a.skinCss+'" id="cascade_scroll_selects"><div class="scs_container"><div class="scs_cover"></div><div class="scs_dialog"><div class="scs_selects">',d.forEach(function(a){c+='<div class="scs_selects_group"><div class="scs_selects_group_title">'+a.title+'</div><div class="scs_selects_group_view"><div class="scs_items" data-height="240" id="'+a.id+'"></div></div></div>'}),c+='</div><div class="scs_btns"><div class="scs_btn_span"></div><div class="scs_btn scs_btn_ok">确定</div><div class="scs_btn scs_btn_cancel">取消</div></div></div></div></div>',b("#cascade_scroll_selects").remove(),b("body").append(c);var e=b("#cascade_scroll_selects");e.find(".scs_dialog").slideDown(300),e.find(".scs_cover").click(function(){e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_ok").click(function(){var c="",d="";b("#cascade_scroll_selects").find(".scs_selected").each(function(a){var e=b(this);0!=a?(c+="-"+e.attr("data-val"),d+=" "+e.html()):(c=e.attr("data-val"),d=e.html())}),a.onOk(c,d),e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_cancel").click(function(){a.onCancel(),e.find(".scs_dialog").slideUp(200,function(){e.remove()})})},SCS.destroy=function(a){"function"==typeof a&&a();var c=b("#cascade_scroll_selects");c.find(".scs_dialog").slideUp(200,function(){c.remove()})},SCS.scrollCascadeSelect=function(a){function c(a){n=!0,q=p=a.pageY,t=(new Date).getTime(),r=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),j.addEventListener("mousemove",d),j.addEventListener("mouseup",e),j.addEventListener("mouseleave",f)}function d(a){n&&(x=(a.pageY-w)/((new Date).getTime()-v),q=a.pageY,s=r+q-p,i.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),w=q,v=(new Date).getTime(),o=!1)}function e(b){if(u=(new Date).getTime(),Math.abs(q-p)>5&&u-t>20){var c=x,g=c>0?.5*c*c/.001:-.5*c*c/.001,h=Math.abs(c)/.001;s=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),s+=g;var k=s%40;Math.abs(k)>=20?s+=0>k?-1*(40+k):40-k:s-=k,s>80?s=80:s<-1*(i.attr("data-height")-120)&&(s=-1*(i.attr("data-height")-120)),i.css({"-webkit-transition":"-webkit-transform "+h/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),m.selectedIndex=Math.abs((s-80)/-40),setTimeout(function(){i.find(".scs_item").removeClass("scs_selected").eq(m.selectedIndex).addClass("scs_selected"),a.onChange(m.getSelectedItem(),m.selectedIndex)},h)}else o=!0;n=!1,p=0,q=0,r=0,s=0,t=u=0,w=x=0,j.removeEventListener("mousemove",d),j.removeEventListener("mouseup",e),j.removeEventListener("mouseleave",f)}function f(b){if(n)if(u=(new Date).getTime(),Math.abs(q-p)>5&&u-t>20){var c=x,g=c>0?.5*c*c/.001:-.5*c*c/.001,h=Math.abs(c)/.001;s=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),s+=g,residue=s%40,Math.abs(residue)>=20?s+=residue<0?-1*(40+residue):40-residue:s-=residue,s>80?s=80:s<-1*(i.attr("data-height")-120)&&(s=-1*(i.attr("data-height")-120)),i.css({"-webkit-transition":"-webkit-transform "+h/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),m.selectedIndex=Math.abs((s-80)/-40),setTimeout(function(){i.find(".scs_item").removeClass("scs_selected").eq(m.selectedIndex).addClass("scs_selected"),a.onChange(m.getSelectedItem(),m.selectedIndex)},h)}else o=!0;n=!1,p=0,q=0,r=0,s=0,t=u=0,w=x=0,j.removeEventListener("mousemove",d),j.removeEventListener("mouseup",e),j.removeEventListener("mouseleave",f)}function g(b){r=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),s=r+.5*b.deltaY;var c=s%40;Math.abs(c)>=20?s+=0>c?-1*(40+c):40-c:s-=c,s>80?s=80:s<-1*(i.attr("data-height")-120)&&(s=-1*(i.attr("data-height")-120)),i.css({"-webkit-transition":"-webkit-transform 0.2s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),m.selectedIndex=Math.abs((s-80)/-40),setTimeout(function(){i.find(".scs_item").removeClass("scs_selected").eq(m.selectedIndex).addClass("scs_selected"),a.onChange(m.getSelectedItem(),m.selectedIndex)},100),r=0,s=0}var h={el:void 0,dataArr:[],startIndex:0,onInit:function(a,b){},onChange:function(a,b){}},a=b.extend({},h,a),i=b(a.el),j=i.get(0),k=a.dataArr,l=a.startIndex,m=this,n=!1,o=!1,p=0,q=0,r=0,s=r,t=0,u=0,v=(new Date).getTime(),w=0,x=0,y=!0;try{ontouchstart}catch(z){y=!1}m.selectedIndex=l,m.getSelectedItem=function(){return k[this.selectedIndex]},y?(j.addEventListener("touchstart",function(a){q=p=a.changedTouches[0].pageY,t=(new Date).getTime(),r=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),x=0},!1),j.addEventListener("touchmove",function(a){event.preventDefault(),x=(a.changedTouches[0].pageY-w)/((new Date).getTime()-v),q=a.changedTouches[0].pageY,s=r+q-p,i.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),w=q,v=(new Date).getTime()},!1),j.addEventListener("touchend",function(b){if(u=(new Date).getTime(),Math.abs(q-p)>5&&u-t>50){var c=x,d=c>0?.5*c*c/.001:-.5*c*c/.001,e=Math.abs(c)/.001;s=parseInt(i.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),s+=d;var f=s%40;Math.abs(f)>=20?s+=0>f?-1*(40+f):40-f:s-=f,s>80?s=80:s<-1*(i.attr("data-height")-120)&&(s=-1*(i.attr("data-height")-120)),i.css({"-webkit-transition":"-webkit-transform "+e/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+s+"px, 0)"}),m.selectedIndex=Math.abs((s-80)/-40),setTimeout(function(){i.find(".scs_item").removeClass("scs_selected").eq(m.selectedIndex).addClass("scs_selected"),a.onChange(m.getSelectedItem(),m.selectedIndex),o=!1},e)}else o=!0;p=0,q=0,r=0,s=0,t=u=0,w=x=0},!1)):(j.addEventListener("mousedown",c),j.addEventListener("wheel",g)),i.on("click",".scs_item",function(c){if(o){var d=b(this),e=d.position().top,f=80-e;i.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+f+"px, 0)"}),i.find(".scs_item").removeClass("scs_selected"),d.addClass("scs_selected"),m.selectedIndex=Math.abs((f-80)/-40),a.onChange(m.getSelectedItem(),m.selectedIndex),havedClick=!1}}),m.render=function(a,b,c){var d="",e=b||0,f=80-40*e;return void 0==a?void i.html(d):(a.forEach(function(a,b){d+=e!=b?'<div class="scs_item" data-val="'+a.key+'">'+a.val+"</div>":'<div class="scs_item scs_selected" data-val="'+a.key+'">'+a.val+"</div>"}),i.html(d),i.attr("data-height",40*a.length),i.css("-webkit-transform","translate3d(0, "+f+"px, 0)"),i.css("transform","translate3d(0, "+f+"px, 0)"),m.selectedIndex=e,k=a,void("function"==typeof c&&c()))};var A=function(){m.render(k,l),a.onInit(m.getSelectedItem(),m.selectedIndex)};A()}}(this,jQuery);